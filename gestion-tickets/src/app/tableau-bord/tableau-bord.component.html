<div class="dashboard-container">
  <h1 class="page-title">Tableau de bord</h1>

  <!-- User Greeting -->
  <div class="user-greeting">
    <div class="user-avatar">{{ userInitials }}</div>
    <div class="greeting-text">
      <h2>Bonjour {{ currentUser?.firstName }} {{ currentUser?.lastName }}</h2>
      <div class="user-role">{{ currentUser?.role }}</div>
      <a class="logout-link" (click)="logout()">Déconnexion</a>
    </div>
  </div>

  <!-- Graphique ngx-charts (Pie Chart) -->
  <div class="pie-chart-container">
    <ngx-charts-pie-chart 
      [view]="view"
      [scheme]="colorScheme"
      [results]="ticketCounts"
      [legend]="true"
      [explodeSlices]="false"
      [labels]="true">
    </ngx-charts-pie-chart>
  </div>
  

  <!-- Tableau récapitulatif -->
  <table class="table-stats">
    <thead>
      <tr>
        <th>#</th>
        <th>Statut</th>
        <th>Nombre de tickets</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let stat of ticketCounts">
        <td>{{ stat.id }}</td>
        <td>{{ stat.name }}</td>
        <td>{{ stat.value }}</td>
      </tr>
    </tbody>
  </table>
</div>
